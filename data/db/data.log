CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
CREATE TABLE PEDIDOS (CODIGO BIGINT NOT NULL, PRIMARY KEY (CODIGO))
CREATE TABLE PRATOS (CODIGO BIGINT NOT NULL, NOME VARCHAR(255), PRIMARY KEY (CODIGO))
CREATE TABLE MESAS (CODIGO BIGINT NOT NULL, DESCRICAO VARCHAR(255), IDENTIFICADOR BIGINT, ID_PEDIDO BIGINT, PRIMARY KEY (CODIGO))
CREATE TABLE ITEMS_PEDIDO (CODIGO BIGINT NOT NULL, QUANTIDADE INTEGER, ID_PEDIDO BIGINT, ID_PRATO BIGINT, PRIMARY KEY (CODIGO))
ALTER TABLE MESAS ADD CONSTRAINT FK_MESAS_ID_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (CODIGO)
ALTER TABLE ITEMS_PEDIDO ADD CONSTRAINT FK_ITEMS_PEDIDO_ID_PRATO FOREIGN KEY (ID_PRATO) REFERENCES PRATOS (CODIGO)
ALTER TABLE ITEMS_PEDIDO ADD CONSTRAINT FK_ITEMS_PEDIDO_ID_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (CODIGO)
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO PRATOS VALUES(3,'Salada')
INSERT INTO PRATOS VALUES(4,'Peixe frito')
INSERT INTO PRATOS VALUES(2,'Bife a milanesa')
INSERT INTO PRATOS VALUES(1,'Frango grelhado')
INSERT INTO PRATOS VALUES(5,'Salm\u00e3o')
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO PEDIDOS VALUES(1)
INSERT INTO ITEMS_PEDIDO VALUES(2,2,NULL,2)
INSERT INTO ITEMS_PEDIDO VALUES(1,1,NULL,1)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO MESAS VALUES(4,'Mesa verde na rua / lado esquerdo',NULL,NULL)
INSERT INTO MESAS VALUES(2,'Mesa atr\u00e1s do balc\u00e3o',NULL,NULL)
INSERT INTO MESAS VALUES(3,'Mesa verde na rua / lado direito',NULL,NULL)
INSERT INTO MESAS VALUES(5,'Mesa da porta',NULL,NULL)
INSERT INTO MESAS VALUES(1,'Mesa perto da janela',NULL,1)
COMMIT
SET AUTOCOMMIT TRUE
DISCONNECT
/*C2*/SET AUTOCOMMIT FALSE
INSERT INTO ITEMS_PEDIDO VALUES(3,1,NULL,3)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa perto da janela',NULL,NULL)
COMMIT
SET AUTOCOMMIT TRUE
