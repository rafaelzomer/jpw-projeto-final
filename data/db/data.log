CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
CREATE TABLE PEDIDOS (CODIGO BIGINT NOT NULL, PRIMARY KEY (CODIGO))
CREATE TABLE PRATOS (CODIGO BIGINT NOT NULL, NOME VARCHAR(255), PRIMARY KEY (CODIGO))
CREATE TABLE MESAS (CODIGO BIGINT NOT NULL, DESCRICAO VARCHAR(255), IDENTIFICADOR BIGINT, ID_PEDIDO BIGINT, PRIMARY KEY (CODIGO))
CREATE TABLE ITEMS_PEDIDO (CODIGO BIGINT NOT NULL, QUANTIDADE INTEGER, ID_PEDIDO BIGINT, ID_PRATO BIGINT, PRIMARY KEY (CODIGO))
ALTER TABLE MESAS ADD CONSTRAINT FK_MESAS_ID_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (CODIGO)
ALTER TABLE ITEMS_PEDIDO ADD CONSTRAINT FK_ITEMS_PEDIDO_ID_PRATO FOREIGN KEY (ID_PRATO) REFERENCES PRATOS (CODIGO)
ALTER TABLE ITEMS_PEDIDO ADD CONSTRAINT FK_ITEMS_PEDIDO_ID_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (CODIGO)
SET AUTOCOMMIT FALSE
INSERT INTO MESAS VALUES(1,'Mesa 01',1,NULL)
COMMIT
SET AUTOCOMMIT TRUE
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO PRATOS VALUES(3,'Salada')
INSERT INTO PRATOS VALUES(4,'Peixe frito')
INSERT INTO PRATOS VALUES(5,'Salm\u00e3o')
INSERT INTO PRATOS VALUES(2,'Bife a milanesa')
INSERT INTO PRATOS VALUES(1,'Frango grelhado')
COMMIT
SET AUTOCOMMIT TRUE
DISCONNECT
/*C2*/SET AUTOCOMMIT FALSE
INSERT INTO PEDIDOS VALUES(1)
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,1)
INSERT INTO ITEMS_PEDIDO VALUES(1,1,NULL,3)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,NULL)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO PEDIDOS VALUES(2)
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,2)
INSERT INTO ITEMS_PEDIDO VALUES(2,2,NULL,3)
COMMIT
SET AUTOCOMMIT TRUE
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,NULL)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO PEDIDOS VALUES(3)
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,3)
INSERT INTO ITEMS_PEDIDO VALUES(3,1,NULL,4)
COMMIT
SET AUTOCOMMIT TRUE
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,NULL)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO PEDIDOS VALUES(4)
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,4)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO ITEMS_PEDIDO VALUES(4,1,NULL,4)
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM MESAS WHERE CODIGO=1
INSERT INTO MESAS VALUES(1,'Mesa 01',1,NULL)
COMMIT
SET AUTOCOMMIT TRUE
